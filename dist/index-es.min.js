const iframePost=(e,a,{origin:s=new URL(e).origin,loaded:t}={})=>{const i=document.createElement("iframe");i.style.display="none",i.addEventListener("load",e=>{t&&t(e),i.contentWindow.postMessage(a,s)}),i.src=e,document.body.append(i)},iframeSource="https://unpkg.com/sharedstorage/index.html",promises={};let id=1;const iframePostPromise=e=>new Promise((a,s)=>{iframePost(iframeSource,Object.assign(e,{id:id,isSharedStorage:!0})),promises[id++]={resolve:a,reject:s}});window.addEventListener("message",e=>{e.data.id&&("error"===e.data.status?promises[e.data.id].reject(e.data):promises[e.data.id].resolve(e.data))}),window.SharedStorage={getItem:async({namespace:e,namespacing:a})=>iframePostPromise({namespacing:a,namespace:e,method:"getItem"}),getMaxRemaining:async()=>iframePostPromise({method:"getMaxRemaining"}),setItem:async({data:e,namespace:a,namespacing:s})=>iframePostPromise({namespacing:s,namespace:a,data:e,method:"setItem"})};
//# sourceMappingURL=index-es.min.js.map
