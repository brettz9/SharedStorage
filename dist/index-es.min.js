const iframePost=(e,a,{origin:s=new URL(e).origin,loaded:i}={})=>{const t=document.createElement("iframe");t.style.display="none",t.addEventListener("load",e=>{i&&i(e),t.contentWindow.postMessage(a,s)}),t.src=e,document.body.append(t)},iframeSource="http://localhost:8051",promises={};let id=1;const iframePostPromise=e=>new Promise((a,s)=>{iframePost(iframeSource,Object.assign(e,{id:id,isSharedStorage:!0})),promises[id++]={resolve:a,reject:s}});window.addEventListener("message",e=>{e.data.id&&("error"===e.data.status?promises[e.data.id].reject(e.data):promises[e.data.id].resolve(e.data))}),window.SharedStorage={get:async({namespace:e,namespacing:a})=>iframePostPromise({namespacing:a,namespace:e}),getMaxRemaining:async()=>iframePostPromise({getMaxRemaining:!0}),set:async({data:e,namespace:a,namespacing:s})=>iframePostPromise({namespacing:s,namespace:a,data:e})};
//# sourceMappingURL=index-es.min.js.map
